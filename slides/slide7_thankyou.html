<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Final Thank You — Reveal</title>

    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --accent: #ffd166;
            --bg: #000;
            --text: #fff;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: "Poppins", sans-serif;
            background: linear-gradient(180deg, #000, #070707);
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 20px;
        }

        .wrap {
            width: min(980px, 96%);
            text-align: center;
        }

        /* Big single button */
        .reveal-btn {
            --size: 120px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 18px 28px;
            border-radius: 14px;
            background: linear-gradient(180deg, rgba(255, 209, 102, 0.15), rgba(255, 209, 102, 0.06));
            border: 2px solid rgba(255, 209, 102, 0.14);
            color: var(--accent);
            font-weight: 700;
            font-size: 1.25rem;
            cursor: pointer;
            transition: transform .18s ease, box-shadow .18s ease, opacity .18s;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(6px);
        }

        .reveal-btn:active {
            transform: translateY(2px) scale(.995)
        }

        .reveal-btn[disabled] {
            opacity: .45;
            cursor: default;
            transform: none;
            box-shadow: none;
        }

        .title {
            font-family: 'Great Vibes', cursive;
            font-size: 3.6rem;
            color: var(--accent);
            text-shadow: 0 0 22px rgba(255, 209, 102, 0.9);
            margin-bottom: 18px;
        }

        /* messages area */
        .messages {
            margin-top: 28px;
            display: flex;
            flex-direction: column;
            gap: 14px;
            align-items: center;
        }

        .msg {
            transform: translateY(16px);
            opacity: 0;
            transition:
                opacity 600ms ease,
                transform 600ms cubic-bezier(.22, 1, .36, 1);
            will-change: opacity, transform;
        }


        .msg.show {
            transform: translateY(0);
            opacity: 1;
        }


        .ending {
            margin-top: 12px;
            color: #ffffffd8;
            font-size: 0.95rem;
        }

        @media (max-width:520px) {
            .title {
                font-size: 2.4rem
            }

            .reveal-btn {
                font-size: 1rem;
                padding: 14px 18px
            }
        }
    </style>
</head>

<body>

    <div class="wrap" role="main" aria-live="polite">
        <div class="title">Thank You Sir</div>

        <!-- Single reveal button -->
        <div>
            <button id="revealBtn" class="reveal-btn" aria-pressed="false" aria-label="Press to reveal surprise">
                ❤ Press to Reveal
            </button>
        </div>

        <!-- Messages container (starts empty/invisible) -->
        <div id="messages" class="messages" aria-hidden="true" tabindex="-1"></div>

        <div class="ending" aria-hidden="true" id="endingLine" style="opacity:0; transition:opacity .8s .6s;">
            Made with Respect — Your MBA 2nd year [2025–26]
        </div>
    </div>

    <!-- audio (relative to this file inside slides/ folder) -->
    <audio id="bgAudio" src="./assets/audio/tada.mpeg" preload="auto"></audio>

    <script>
        // One-button reveal + sequential animated messages + start music
        const revealBtn = document.getElementById('revealBtn');
        const messagesEl = document.getElementById('messages');
        const endingLine = document.getElementById('endingLine');
        const audio = document.getElementById('bgAudio');

        // The messages to show in order and timing (ms)
        const sequence = [
            { text: "Dear Dr. Vikas Varshney —", delay: 400 },
            { text: "We made this for you with gratitude. Your guidance shaped our thinking, discipline and futures.", delay: 900 },
            { text: "You taught us clarity, patience, and the courage to make smart decisions.", delay: 900 },
            { text: "Wishing you endless success, happiness & prosperity. Thank you, Sir.", delay: 1000 }
        ];

        let revealed = false;

        async function handleReveal() {
            if (revealed) return;
            revealed = true;

            // disable button immediately
            revealBtn.disabled = true;
            revealBtn.setAttribute('aria-pressed', 'true');

            // small press animation
            revealBtn.style.transform = 'scale(.98)';
            setTimeout(() => revealBtn.style.transform = '', 220);

            // attempt to play music (user gesture)
            try {
                await audio.play();
            } catch (err) {
                // some browsers require a gesture; but this is a gesture so usually ok.
                console.warn('Audio play blocked or failed:', err);
            }

            // show messages sequentially
            messagesEl.setAttribute('aria-hidden', 'false');
            messagesEl.focus?.();

            let totalDelay = 300; // initial small pause
            for (let i = 0; i < sequence.length; i++) {
                const item = sequence[i];
                totalDelay += item.delay;

                // schedule each message
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'msg';
                    div.innerHTML = `<strong>${item.text.split('—')[0]}</strong>`; // for first splash maybe bold
                    // If long text, we want full text not just before dash — better to set full:
                    div.innerHTML = `<div style="font-weight:600;margin-bottom:6px">${i === 0 ? item.text : ''}</div>`;
                    // For messages after the first, use full paragraph
                    if (i > 0) {
                        div.innerHTML = `<p style="margin:0">${item.text}</p>`;
                    } else {
                        // first message (title like)
                        div.innerHTML = `<p style="margin:0;font-weight:700">${item.text}</p>`;
                    }
                    messagesEl.appendChild(div);
                    // force reflow then add .show
                    messagesEl.appendChild(div);

                    requestAnimationFrame(() => {
                        div.classList.add('show');
                    });

                    // on last message, reveal ending line after short pause
                    if (i === sequence.length - 1) {
                        setTimeout(() => {
                            endingLine.style.opacity = '1';
                        }, 850);
                    }

                }, totalDelay);
            }

            // optional: slightly fade out the reveal button after the entire sequence
            setTimeout(() => {
                revealBtn.style.opacity = '0';
                revealBtn.style.transition = 'opacity 900ms ease';
                setTimeout(() => revealBtn.style.display = 'none', 900);
            }, totalDelay + 700);
        }

        // bind click and keyboard (Enter/Space)
        revealBtn.addEventListener('click', handleReveal);
        revealBtn.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); handleReveal(); }
        });

        // ensure audio is paused/stopped if user leaves
        window.addEventListener('beforeunload', () => {
            try { audio.pause(); audio.currentTime = 0; } catch (e) { }
        });
    </script>
</body>

</html>